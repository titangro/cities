(window.webpackJsonpcities=window.webpackJsonpcities||[]).push([[0],{33:function(e,t,n){e.exports=n(47)},43:function(e,t,n){},44:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(14),i=n.n(c),o=n(17),l=n(27),u=n(16),s=n(10),f={error:null,loading:!1,cities:[],city:null},p={ERROR:"cities/app/error",ERROR_DELETE:"cities/app/error/delete",LOADED:"cities/app/loaded",LOADING:"cities/app/loading"},d={GET:"cities/app/get",SHOW:"cities/app/show",SHOW_DETAILS:"cities/app/details"};var h=n(28);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var m,O,y=Object(s.c)({loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.loading;switch((arguments.length>1?arguments[1]:void 0).type){case p.LOADING:return!0;case p.LOADED:return!1;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.error,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.ERROR:return t.error;case p.ERROR_DELETE:return null;default:return e}},cities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.cities,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.GET:return t.cities;default:return e}},city:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.city,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.SHOW:return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach(function(t){Object(h.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t.city,{salaries:t.salaries,scores:t.scores,details:t.details});default:return e}}});var b=l.__PRODUCTION__?function(e){return m||(m=Object(s.e)(y,e,Object(s.d)(Object(s.a)(u.a),"undefined"!==typeof window&&window.devToolsExtension?window.devToolsExtension():function(e){return e})))}:function(e){if(O)return O;var t=Object(s.e)(y,e,Object(s.d)(Object(s.a)(u.a),"undefined"!==typeof window&&window.devToolsExtension?window.devToolsExtension():function(e){return e}));return O=t},v=(n(42),n(43),n(44),n(12)),g=n(11),j=n(7),w=n(18),R=function(){return{type:p.LOADING}},D=function(){return{type:p.LOADED}},I=function(e){return function(t){return t({type:p.ERROR,error:e})}},_=function(e){return function(t){t(R()),fetch(e).then(function(e){return e.json()}).then(function(e){e.count?(t(function(e){return e({type:p.ERROR_DELETE})}),t(function(e){return function(t){t(D()),t({type:d.GET,cities:e})}}(e._embedded["city:search-results"]))):t(I("\u041f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u043d\u0438 1 \u0433\u043e\u0440\u043e\u0434"))},function(e){return t(I(e))})}},T=function(e){return function(t){t(R()),fetch(e).then(function(e){return e.json()}).then(function(e){return t((n=e,function(e){if(n._links["city:urban_area"]){var t=n._links["city:urban_area"].href;Promise.all([fetch("".concat(t,"salaries/")).then(function(e){return e.json()}).then(function(e){return e}),fetch("".concat(t,"scores/")).then(function(e){return e.json()}).then(function(e){return e}),fetch("".concat(t,"details/")).then(function(e){return e.json()}).then(function(e){return e})]).then(function(t){var r=Object(w.a)(t,3),a=r[0],c=r[1],i=r[2];e(D()),e({type:d.SHOW,city:n,salaries:a,scores:c,details:i})})}else e({type:d.SHOW,city:n})}));var n},function(e){return t(I(e))})}},L=n(48),P=n(52),S=n(51),k=n(50),A=n(49),x=Object(g.f)(function(e){var t=e.cities,n=e.fetchCities,c=e.apiRoot,i=e.history,o=e.error,l=null,u=Object(r.useState)(function(){return i.location.search?i.location.search.slice(1).split("=")[1]:""}),s=Object(w.a)(u,2),f=s[0],p=s[1];return Object(r.useEffect)(function(){var e="".concat(c,"cities/?search=").concat(f);n(e),i.push("/list?search=".concat(f))},[f]),a.a.createElement(L.a,null,a.a.createElement("h1",null,"\u041f\u043e\u0438\u0441\u043a \u0433\u043e\u0440\u043e\u0434\u043e\u0432"),a.a.createElement(P.a,{className:"mb-3"},a.a.createElement(S.a,{name:"cities",ref:function(e){return l=e},placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u043e\u0440\u043e\u0434\u0430","aria-label":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u043e\u0440\u043e\u0434\u0430","aria-describedby":"basic-addon2",defaultValue:i.location.search?decodeURI(i.location.search.slice(1).split("=")[1]):""}),a.a.createElement(P.a.Append,null,a.a.createElement(k.a,{variant:"outline-secondary",onClick:function(){p(l.value)}},"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a"))),t.length&&!o?a.a.createElement(A.a,null,a.a.createElement("p",null,"\u041d\u0430\u0439\u0434\u0435\u043d\u043e: ",t.length," \u0433\u043e\u0440\u043e\u0434\u043e\u0432"),t.map(function(e,t){var n=e._links["city:item"].href.slice(1,-1).split("/").pop().split(":").pop();return a.a.createElement(A.a.Item,{action:!0,key:t},a.a.createElement(v.b,{to:"/search/".concat(n)},e.matching_full_name))})):o?a.a.createElement("p",null,o):a.a.createElement("p",null,"\u041f\u043e\u043a\u0430 \u0441\u043f\u0438\u0441\u043e\u043a \u0433\u043e\u0440\u043e\u0434\u043e\u0432 \u043f\u0443\u0441\u0442"))}),C=function(){return a.a.createElement(L.a,null,a.a.createElement("h1",null,"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!"),a.a.createElement(v.b,{to:"/list"},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043f\u043e\u0438\u0441\u043a\u0443"))},G=function(e){var t=e.city,n=e.cityId,c=e.fetchCity,i=e.apiRoot;return Object(r.useEffect)(function(){var e="".concat(i,"cities/geonameid:").concat(n);c(e)},[n]),t?a.a.createElement(L.a,null,a.a.createElement("h1",null,t.name),a.a.createElement(A.a,{as:"ul"},a.a.createElement(A.a.Item,{as:"li"},"\u041c\u0435\u0441\u0442\u043e\u043d\u0430\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0435: ",t.full_name),a.a.createElement(A.a.Item,{as:"li",active:!0},"\u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b: ",t.location.latlon.latitude," ",t.location.latlon.longitude),a.a.createElement(A.a.Item,{as:"li"},"Morbi leo risus"),a.a.createElement(A.a.Item,{as:"li",active:!0},"\u041d\u0430\u0441\u0435\u043b\u0435\u043d\u0438\u0435: ",t.population.toLocaleString("ru-RU")," \u0447\u0435\u043b\u043e\u0432\u0435\u043a"),a.a.createElement(A.a.Item,{as:"li"},t.salaries||t.scores||t.details?"\u0415\u0441\u0442\u044c \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435":"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0432\u0443\u044e\u0442"))):""},N=function(e){console.log(e);var t=Object(j.a)({basename:"/cities"});return a.a.createElement(v.a,{basename:"/cities"},a.a.createElement("div",{className:"wrapper"},a.a.createElement(g.c,null,a.a.createElement(g.a,{exact:!0,path:"/",component:C}),a.a.createElement(g.a,{path:"/list"},a.a.createElement(x,Object.assign({},e,{history:t}))),a.a.createElement(g.a,{path:"/search/:cityId",children:function(t){var n=t.match;return a.a.createElement(G,Object.assign({},e,{cityId:n.params.cityId}))}}))))};N.defaultProps={apiRoot:"https://api.teleport.org/api/"};var H=Object(o.b)(function(e){return{error:e.error,loading:e.loading,cities:e.cities,city:e.city}},function(e){return{fetchCities:function(t){return e(_(t))},fetchCity:function(t){return e(T(t))}}})(N),W=b(f);i.a.render(a.a.createElement(o.a,{store:W},a.a.createElement(H,null)),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.b99a6e05.chunk.js.map